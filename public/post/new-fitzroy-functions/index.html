<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>New fitzRoy functions</title>
  <meta property="og:title" content="New fitzRoy functions" />
  <meta name="twitter:title" content="New fitzRoy functions" />
  <meta name="description" content="The new AFL season, with it’s condensed fixture, is proving challenging for the old little R package fitzRoy. Luckily I’ve added a couple new functions to help!
You’ll need the development version of the package.
devtools::install_github(&quot;jimmyday12/fitzRoy&quot;) library(fitzRoy) library(dplyr) Fixture I recently noticed that the get_fixture function was broken. There is unfortunately not a lot I can do with that one. The Footywire website doesn’t provide round in it’s outputs and so I’ve always just calculated this assuming that rounds begin on Thursday/Friday and finish on Sunday/Monday.">
  <meta property="og:description" content="The new AFL season, with it’s condensed fixture, is proving challenging for the old little R package fitzRoy. Luckily I’ve added a couple new functions to help!
You’ll need the development version of the package.
devtools::install_github(&quot;jimmyday12/fitzRoy&quot;) library(fitzRoy) library(dplyr) Fixture I recently noticed that the get_fixture function was broken. There is unfortunately not a lot I can do with that one. The Footywire website doesn’t provide round in it’s outputs and so I’ve always just calculated this assuming that rounds begin on Thursday/Friday and finish on Sunday/Monday.">
  <meta name="twitter:description" content="The new AFL season, with it’s condensed fixture, is proving challenging for the old little R package fitzRoy. Luckily I’ve added a couple new functions to help!
You’ll need the development version of …">
  <meta name="author" content="James Day"/>
  <link href='/img/favicon-new.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="/img/avator-icon-new.png" />
  <meta name="twitter:image" content="/img/avator-icon-new.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@plusSixOneblog" />
  <meta name="twitter:creator" content="@plusSixOneblog" />
  <meta property="og:url" content="/post/new-fitzroy-functions/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="plusSixOne" />

  <meta name="generator" content="Hugo 0.66.0" />
  <link rel="canonical" href="/post/new-fitzroy-functions/" />
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="plusSixOne">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="/css/codeblock.css" /><link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-77406420-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">plusSixOne</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Categories" href="/categories">Categories</a>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">AFL Mens</a>
              <div class="navlinks-children">
                
                  <a href="/page/aflm-predictions">Predictions</a>
                
                  <a href="/page/aflm-games">Current Tips</a>
                
                  <a href="/page/aflm-model-results">Model Results</a>
                
              </div>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent" href="javascript:void(0)">AFL Womens</a>
              <div class="navlinks-children">
                
                  <a href="/page/aflw-coming-soon/">Coming Soon</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="Cool Links" href="/page/cool-links/">Cool Links</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
          <a title="plusSixOne" href="/">
            <img class="avatar-img" src="/img/avator-icon-new.png" alt="plusSixOne" />
          </a>
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>New fitzRoy functions</h1>
                
                
                  <span class="post-meta">
  
  
  <i class="fa fa-calendar-o"></i>&nbsp;Posted on August 3, 2020
  
  
  &nbsp;|&nbsp;
  <i class="fa fa-clock-o"></i> 5 minutes (873 words)
  
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        


<p>The new AFL season, with it’s condensed fixture, is proving challenging for the old little R package <code>fitzRoy</code>. Luckily I’ve added a couple new functions to help!</p>
<p>You’ll need the development version of the package.</p>
<pre class="r"><code>devtools::install_github(&quot;jimmyday12/fitzRoy&quot;)
library(fitzRoy)
library(dplyr)</code></pre>
<div id="fixture" class="section level2">
<h2>Fixture</h2>
<p>I recently noticed that the <code>get_fixture</code> function was broken. There is unfortunately not a lot I can do with that one. The Footywire website doesn’t provide <code>round</code> in it’s outputs and so I’ve always just calculated this assuming that rounds begin on Thursday/Friday and finish on Sunday/Monday. That obviously doesn’t work this year!</p>
<p>For example, see below. The games on the 2nd August are Round 9, the games on the 3rd of Augst should be Round 10. The games on the 8th of August should be Round 11!</p>
<pre class="r"><code>fixture &lt;- get_fixture(season = 2020)
fixture %&gt;% filter(Date &gt;= lubridate::dmy(&quot;02/08/2020&quot;) &amp; Date &lt;= lubridate::dmy(&quot;08/08/2020&quot;))</code></pre>
<pre><code>## # A tibble: 9 x 7
##   Date                Season Season.Game Round Home.Team   Away.Team    Venue   
##   &lt;dttm&gt;               &lt;dbl&gt;       &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;   
## 1 2020-08-02 15:35:00   2020           1     9 Gold Coast  GWS          Carrara 
## 2 2020-08-02 16:10:00   2020           1     9 Fremantle   Collingwood  Perth S…
## 3 2020-08-03 18:40:00   2020           1    10 Port Adela… Footscray    Adelaid…
## 4 2020-08-04 19:10:00   2020           1    10 Richmond    Brisbane Li… Carrara 
## 5 2020-08-05 17:40:00   2020           1    10 Geelong     North Melbo… Gabba   
## 6 2020-08-05 19:40:00   2020           1    10 Adelaide    Melbourne    Adelaid…
## 7 2020-08-06 17:40:00   2020           1    10 Collingwood Sydney       Gabba   
## 8 2020-08-06 20:10:00   2020           1    10 Gold Coast  St Kilda     Carrara 
## 9 2020-08-07 19:50:00   2020           1    10 Essendon    GWS          Carrara</code></pre>
<p>I’m going to try and get it working but in the meantime, I’ve added a new function to return the fixture from the AFL.com.au website. OBviously this is not going to be the same as the normal <code>get_fixture</code> function and might need some tidying of names etc, but at least it works!</p>
<p>The function ask you to provide a <code>season</code> and an optional <code>round</code> as arguements.</p>
<pre class="r"><code>fixture &lt;- get_afl_fixture(season = 2020)
fixture %&gt;% filter(date &gt;= lubridate::dmy(&quot;02/08/2020&quot;) &amp; date &lt;= lubridate::dmy(&quot;08/08/2020&quot;)) %&gt;%
  select(date, round_name, home_name, away_name, venue_name)</code></pre>
<pre><code>## # A tibble: 11 x 5
##    date       round_name home_name       away_name        venue_name      
##    &lt;date&gt;     &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;           
##  1 2020-08-02 Round 9    Gold Coast Suns GWS Giants       Metricon Stadium
##  2 2020-08-02 Round 9    Fremantle       Collingwood      Optus Stadium   
##  3 2020-08-03 Round 10   Port Adelaide   Western Bulldogs Adelaide Oval   
##  4 2020-08-04 Round 10   Richmond        Brisbane Lions   Metricon Stadium
##  5 2020-08-05 Round 10   Geelong Cats    North Melbourne  Gabba           
##  6 2020-08-05 Round 10   Adelaide Crows  Melbourne        Adelaide Oval   
##  7 2020-08-06 Round 10   Collingwood     Sydney Swans     Gabba           
##  8 2020-08-06 Round 10   Gold Coast Suns St Kilda         Metricon Stadium
##  9 2020-08-07 Round 10   Essendon        GWS Giants       Metricon Stadium
## 10 2020-08-08 Round 11   Port Adelaide   Richmond         Adelaide Oval   
## 11 2020-08-08 Round 11   Brisbane Lions  Western Bulldogs Gabba</code></pre>
<p>Looks a lot better!</p>
</div>
<div id="results" class="section level2">
<h2>Results</h2>
<p>The other issue I’ve found is that the AFL Tables website can sometimes take time to update after a around is over. Generally - all results come through 1-2 days after a round finishes.</p>
<pre class="r"><code>get_match_results() %&gt;%
  tail()</code></pre>
<pre><code>## # A tibble: 6 x 16
##    Game Date       Round Home.Team Home.Goals Home.Behinds Home.Points Away.Team
##   &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;          &lt;int&gt;        &lt;int&gt;       &lt;int&gt; &lt;chr&gt;    
## 1 15689 2020-07-31 R9    Essendon           3           10          28 Brisbane…
## 2 15690 2020-08-01 R9    North Me…         19            5         119 Adelaide 
## 3 15691 2020-08-01 R9    St Kilda          15           11         101 Sydney   
## 4 15692 2020-08-01 R9    West Coa…         11            7          73 Geelong  
## 5 15693 2020-08-02 R9    Gold Coa…          4           11          35 GWS      
## 6 15694 2020-08-02 R9    Fremantle         10            1          61 Collingw…
## # … with 8 more variables: Away.Goals &lt;int&gt;, Away.Behinds &lt;int&gt;,
## #   Away.Points &lt;int&gt;, Venue &lt;chr&gt;, Margin &lt;int&gt;, Season &lt;dbl&gt;,
## #   Round.Type &lt;chr&gt;, Round.Number &lt;int&gt;</code></pre>
<p>This might be an issue moving forward if there are any delays in match results. To help here, I’ve added a new function to return results from footywire.com.</p>
<p>Again - you can provide a <code>season</code> input. Optionally - you can specify the <code>last_n_games</code>. This is a bit clunky but again, without having <code>round</code> as part of the website, it’s a tricky one to scrape. For now - returning the most recent n number of matches is the easiest approach.</p>
<pre class="r"><code>get_footywire_match_results(2020, last_n_matches = 10)</code></pre>
<pre><code>## # A tibble: 10 x 8
##    Date       Time  Round  Venue   Home.Team  Away.Team  Home.Points Away.Points
##    &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;int&gt;       &lt;int&gt;
##  1 2020-07-29 19:10 Round… &quot; Metr… Western B… Richmond            49          90
##  2 2020-07-30 19:50 Round… &quot; Gabb… Melbourne  Port Adel…          32          83
##  3 2020-07-31 15:40 Round… &quot; Optu… Carlton    Hawthorn            58          89
##  4 2020-07-31 20:10 Round… &quot; Metr… Essendon   Brisbane            28          91
##  5 2020-08-01 14:35 Round… &quot; Metr… North Mel… Adelaide           119          50
##  6 2020-08-01 17:10 Round… &quot; Gabb… St Kilda   Sydney             101          48
##  7 2020-08-01 18:10 Round… &quot; Optu… West Coast Geelong             73          64
##  8 2020-08-02 15:35 Round… &quot; Metr… Gold Coast GWS                 35          61
##  9 2020-08-02 16:10 Round… &quot; Optu… Fremantle  Collingwo…          61          49
## 10 2020-08-03 18:40 Round… &quot; Adel… Port Adel… Western B…          55          42</code></pre>
<p>That’s about it - let me know how you go!</p>
</div>

      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="/post/monash-tips-package/" data-toggle="tooltip" data-placement="top" title="Monash Tips Package">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "plussixone" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:jamesthomasday@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.facebook.com/plussixoneblog" title="Facebook">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/jimmyday12" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/plusSixOneblog" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/james-day-ab648321" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="plussixoneblog.com">James Day</a>
            
          

          &nbsp;&bull;&nbsp;
          2020

          
            &nbsp;&bull;&nbsp;
            <a href="/">plusSixOne</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.66.0</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
  

</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>

<script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>









<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>

<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>

  </body>
</html>

